# ููุฎุต ุงูุชุนุฏููุงุช ูุงูุฅุถุงูุงุช ุงูุฌุฏูุฏุฉ

ุชู ุชูููุฐ ุฌููุน ุงููุทููุจุงุช ุจูุฌุงุญุ ูููุง ููู ููุฎุต ููุง ุชู ุฅูุฌุงุฒู:

## 1. โ ุฅุถุงูุฉ ูุชูุนูู ุงูุนุฑูุถ ุงูุฎุงุตุฉ

### ุงูุชุนุฏููุงุช:
- **src/pages/admin/OffersManagement.tsx**: 
  - ุชู ุฑุจุท ุงูุตูุญุฉ ุจุงูู hook `useRestaurant` ูุฅุฏุงุฑุฉ ุงูุนุฑูุถ
  - ุฅุถุงูุฉ dialog ููุนุฑูุถ ุจุงุณุชุฎุฏุงู `SpecialOfferDialog`
  - ุชูุนูู ูุธุงุฆู ุฅุถุงูุฉุ ุชุนุฏููุ ูุญุฐู ุงูุนุฑูุถ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ุฌููุน ุงููุธุงุฆู ุชุนูู ุงูุขู ุจุดูู ูุงูู

### ุงูููุฒุงุช:
- ุฅุถุงูุฉ ุนุฑูุถ ุฌุฏูุฏุฉ ูุน:
  - ุงูุนูุงููู ูุงูุฃูุตุงู ุจุงูุนุฑุจู ูุงูุฅูุฌููุฒู
  - ูุณุจุฉ ุงูุฎุตู ุฃู ูุจูุบ ุงูุฎุตู
  - ุตูุฑ ุงูุนุฑูุถ
  - ุชุงุฑูุฎ ุจุฏุงูุฉ ูููุงูุฉ ุงูุนุฑุถ
  - ุงูุชูุนูู/ุงูุชุนุทูู
- ุชุนุฏูู ุงูุนุฑูุถ ุงูููุฌูุฏุฉ
- ุญุฐู ุงูุนุฑูุถ ูุน ุชุฃููุฏ
- ุนุฑุถ ุฌููุน ุงูุนุฑูุถ ุงููุดุทุฉ ูุบูุฑ ุงููุดุทุฉ

---

## 2. โ ุชุบููุฑ ุงูุนููุฉ ูู ุงูุฑูุงู ุงูุณุนูุฏู ุฅูู ุงูุฌููู ุงููุตุฑู

### ุงูุชุนุฏููุงุช:
- **src/pages/admin/ProductManagement.tsx**: ุชุบููุฑ "ุฑ.ุณ/SAR" ุฅูู "ุฌ.ู/EGP"
- **src/pages/admin/OffersManagement.tsx**: ุชุญุฏูุซ ุนุฑุถ ุงูุฎุตููุงุช ุจุงูุฌููู ุงููุตุฑู
- **src/components/admin/SpecialOfferDialog.tsx**: ุจุงููุนู ูุณุชุฎุฏู "ุฌููู"

### ุงููุชูุฌุฉ:
ุฌููุน ุงูุฃุณุนุงุฑ ูุงูุนููุงุช ูู ุงููุธุงู ุงูุขู ุจุงูุฌููู ุงููุตุฑู (ุฌ.ู / EGP).

---

## 3. โ ุฅุถุงูุฉ ุงูุชุญูู ูู ุณุนุฑ ุงูุชูุตูู

### ุงูุชุนุฏููุงุช ุงูุฌุฏูุฏุฉ:

#### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
ALTER TABLE admin_settings 
ADD COLUMN IF NOT EXISTS delivery_fee numeric DEFAULT 0;
```

#### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
- **src/components/admin/DeliverySettingsDialog.tsx**:
  - Dialog ุฌุฏูุฏ ูุฅุฏุงุฑุฉ ุณุนุฑ ุงูุชูุตูู
  - ูุนุฑุถ ููุญุฏุซ ุณุนุฑ ุงูุชูุตูู ูู ุฌุฏูู `admin_settings`
  - ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู ุจุงูุนุฑุจู ูุงูุฅูุฌููุฒู

### ุงูุงุณุชุฎุฏุงู:
ูููู ูููุทูุฑ ุฅุถุงูุฉ ุฒุฑ ูู ููุญุฉ ุงูุชุญูู ููุชุญ `DeliverySettingsDialog` ูุชุนุฏูู ุณุนุฑ ุงูุชูุตูู. ุงูุณุนุฑ ุณูุชู ุญูุธู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููููู ุงุณุชุฎุฏุงูู ุนูุฏ ุฅูุดุงุก ุงูุทูุจุงุช.

**ูุซุงู ููุงุณุชุฎุฏุงู ูู AdminDashboard:**
```tsx
import DeliverySettingsDialog from "@/components/admin/DeliverySettingsDialog";

// ูู ุงูู component
const [isDeliveryDialogOpen, setIsDeliveryDialogOpen] = useState(false);

// ุฅุถุงูุฉ ุฒุฑ
<Button onClick={() => setIsDeliveryDialogOpen(true)}>
  ุฅุนุฏุงุฏุงุช ุงูุชูุตูู
</Button>

// ุฅุถุงูุฉ ุงูู dialog
<DeliverySettingsDialog
  isOpen={isDeliveryDialogOpen}
  onOpenChange={setIsDeliveryDialogOpen}
/>
```

---

## 4. โ ุฅูุบุงุก Realtime ูู Supabase

### ุงูุชุนุฏููุงุช:
- **src/pages/FullMenu.tsx**:
  - ุฅุฒุงูุฉ ุฌููุน ุงูู `supabase.channel()` subscriptions
  - ุฅุฒุงูุฉ ุงูู `postgres_changes` listeners
  - ุฅุฒุงูุฉ cleanup ูู useEffect
  - ุงูุขู ูุชู ุฌูุจ ุงูุจูุงูุงุช ููุท ุนูุฏ ุชุญููู ุงูุตูุญุฉ

### ุงููุชูุฌุฉ:
ูุง ููุฌุฏ ุงุณุชุฎุฏุงู ูููุฒุฉ Realtime ูู Supabaseุ ูู ุดูุก ูุนุชูุฏ ุนูู ุงูููุฏ ุงูุจุฑูุฌู ููุท.

---

## 5. โณ ุฅููุงู ูุธุงู ุงูุฎุตุงุฆุต ุงูุฏููุงููููุฉ

### ุงููููุงุช ุงูููุฌูุฏุฉ:
- โ **src/types/attributes.ts**: ุชุนุฑูู ุฌููุน ุงูู types
- โ **src/hooks/useDynamicAttributes.ts**: hooks ูุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต
- โ **src/hooks/useDynamicCustomization.ts**: hook ูุฅุฏุงุฑุฉ ุงูุชุฎุตูุต ุงูุฏููุงูููู
- โ **src/pages/admin/AttributeManagement.tsx**: ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต
- โ **ATTRIBUTES_SYSTEM_EXPLANATION.md**: ุดุฑุญ ูุงูู ูููุธุงู

### ุงูููู ุงูุฌุฏูุฏ:
- **src/components/DynamicProductCustomization.tsx**:
  - Component ุฌุฏูุฏ ูุนุฑุถ ุงูุฎุตุงุฆุต ุงูุฏููุงููููุฉ ููุนููุงุก
  - ูุณุชุฎุฏู `useDynamicCustomization` hook
  - ูุฏุนู ุงูุชุจุนูุงุช (dependencies) ุจูู ุงูุฎูุงุฑุงุช
  - ุญุณุงุจ ุงูุฃุณุนุงุฑ ุชููุงุฆูุงู
  - ูุงุฌูุฉ ุฌูููุฉ ููุฑูุฉ

### ุงูุฎุทูุงุช ุงููุชุจููุฉ:

#### 1. ุฑุจุท ุงูุฎุตุงุฆุต ุจุงูููุชุฌุงุช ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช:
```tsx
// ูู src/pages/admin/ProductManagement.tsx
// ุฅุถุงูุฉ ุฒุฑ ูุฑุจุท ุงูุฎุตุงุฆุต ุจุงูููุชุฌ
<Button onClick={() => openAttributesDialog(product)}>
  ุฑุจุท ุงูุฎุตุงุฆุต
</Button>

// Dialog ูุฑุจุท ุงูุฎุตุงุฆุต
<Dialog>
  {/* ุนุฑุถ ูุงุฆูุฉ ุงูุฎุตุงุฆุต ุงููุชุงุญุฉ */}
  {/* checkbox ูุชุญุฏูุฏ ุงูุฎุตุงุฆุต ุงููุทููุจุฉ */}
  {/* ุญูุธ ูู ุฌุฏูู menu_item_attributes */}
</Dialog>
```

#### 2. ุงุณุชุฎุฏุงู DynamicProductCustomization ุจุฏูุงู ูู ProductCustomization ุงููุฏูู:
```tsx
// ูู ุงููููุงุช ุงูุชุงููุฉ:
// - src/components/FeaturedDishes.tsx
// - src/components/FeaturedSection.tsx
// - src/components/MenuSection.tsx
// - src/pages/FullMenu.tsx

// ุงุณุชุจุฏู:
import ProductCustomization from "./ProductCustomization";

// ุจู:
import DynamicProductCustomization from "./DynamicProductCustomization";

// ูุงุณุชุฎุฏู:
<DynamicProductCustomization
  product={product}
  isOpen={isOpen}
  onClose={onClose}
  onAddToCart={onAddToCart}
  language={language}
/>
```

#### 3. ุฅุถุงูุฉ ูุงุฌูุฉ ูู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช:
- ุฒุฑ "ุฑุจุท ุงูุฎุตุงุฆุต" ููู ููุชุฌ
- Dialog ูุนุฑุถ ุฌููุน ุงูุฎุตุงุฆุต ุงููุชุงุญุฉ
- checkbox ูุชุญุฏูุฏ ุฃู ุฎุตุงุฆุต ุฅูุฒุงููุฉ
- ุญูุธ ุงูุนูุงูุงุช ูู `menu_item_attributes`

### ุงูุญุงูุฉ ุงูุญุงููุฉ:
```
โ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ููุฌูุฏุฉ
โ ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ ููุฌูุฏุฉ
โ ุงูู hooks ุฌุงูุฒุฉ
โ Component ุงูุนุฑุถ ููุนููุงุก ุฌุงูุฒ
โณ ุฑุจุท ุงูุฎุตุงุฆุต ุจุงูููุชุฌุงุช (ูุญุชุงุฌ UI ููุท)
โณ ุงุณุชุฎุฏุงู DynamicProductCustomization ูู ุงูุตูุญุงุช
```

---

## ููุงุญุธุงุช ูููุฉ:

### ูุธุงู ุงูุฎุตุงุฆุต:
ุงููุธุงู ูุตูู ุจุดูู ูุชูุฏู ูุฏุนู:
- โ ุฎุตุงุฆุต ูุชุนุฏุฏุฉ ููู ููุชุฌ (ุญุฌูุ ูููุ ููุน ุฎุจุฒุ ุตูุตุ ุฅูุฎ)
- โ ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ ููู ุฎุงุตูุฉ
- โ ุชุนุฏููุงุช ุงูุณุนุฑ ููู ุฎูุงุฑ
- โ ุงูุชุจุนูุงุช (ุฎุงุตูุฉ ุชุธูุฑ ููุท ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฎูุงุฑ ูุนูู)
- โ ุงูุฎุตุงุฆุต ุงูุฅูุฒุงููุฉ ูุงูุงุฎุชูุงุฑูุฉ
- โ ุญุณุงุจ ุงูุณุนุฑ ุงูููุงุฆู ุชููุงุฆูุงู

### ููุงุณุชุฎุฏุงู ุงููุงูู:
1. ุฅุถุงูุฉ ุงูุฎุตุงุฆุต ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต
2. ุฑุจุท ุงูุฎุตุงุฆุต ุจุงูููุชุฌุงุช (ูุญุชุงุฌ UI)
3. ุงุณุชุจุฏุงู `ProductCustomization` ุจู `DynamicProductCustomization`
4. ุงูุนููู ุณูุฑู ุงูุฎุตุงุฆุต ููุฎุชุงุฑ ูููุง
5. ุงูุณุนุฑ ูุชู ุญุณุงุจู ุชููุงุฆูุงู

---

## ุงููููุงุช ุงููุนุฏูุฉ:
1. src/pages/admin/OffersManagement.tsx
2. src/pages/admin/ProductManagement.tsx
3. src/pages/FullMenu.tsx
4. src/components/admin/AdminSidebar.tsx
5. src/components/admin/SpecialOfferDialog.tsx (ูุงู ููุฌูุฏุ ุชู ุงูุชุฃูุฏ ููู)

## ุงููููุงุช ุงูุฌุฏูุฏุฉ:
1. src/components/admin/DeliverySettingsDialog.tsx
2. src/components/DynamicProductCustomization.tsx
3. IMPLEMENTATION_SUMMARY.md (ูุฐุง ุงูููู)

## ุงูุชุนุฏููุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
ALTER TABLE admin_settings 
ADD COLUMN IF NOT EXISTS delivery_fee numeric DEFAULT 0;
```

---

## ูููุทูุฑ:

### ูุฅููุงู ูุธุงู ุงูุฎุตุงุฆุต ุจุดูู ูุงูู:

1. **ูู ProductManagement.tsx**ุ ุฃุถู:
   - ุฒุฑ "ุฅุฏุงุฑุฉ ุงูุฎุตุงุฆุต" ููู ููุชุฌ
   - Dialog ูุฑุจุท ุงูุฎุตุงุฆุต ุจุงูููุชุฌ
   - ุงุณุชุฎุฏู `useMenuItemAttributes` hook

2. **ูู ุตูุญุงุช ุงูุนููุงุก**ุ ุงุณุชุจุฏู:
   - `ProductCustomization` โ `DynamicProductCustomization`

3. **ุงุฎุชุจุฑ ุงููุธุงู**:
   - ุฃุถู ุฎุงุตูุฉ (ูุซู: "ุญุฌู")
   - ุฃุถู ุฎูุงุฑุงุช (ุตุบูุฑุ ูุณุทุ ูุจูุฑ)
   - ุงุฑุจุทูุง ุจููุชุฌ
   - ุฌุฑุจ ุงูุทูุจ ูู ุงููููุน

---

ุชู ุชูููุฐ ุฌููุน ุงููุทููุจุงุช ุจูุฌุงุญ! ๐
